#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Mon Nov 15 13:49:05 2021

@author: lcabral4
"""

import citidata
import glob
import numpy as np
from numpy import *
import matplotlib.pyplot as plt

balls = []
all_my_files = glob.glob("*.citi")
for filename in all_my_files:
    print("=== %s ===" % filename)
    citi_file = citidata.genfromfile(filename)
    for package in citi_file.packages:
        print(package)
        print(package.indep)
        print('-----')
        print(package.deps)
        balls.append(package.deps)
        print(type(package.deps))
print('---------')        
#x = np.linspace(8, 12, 201) 
#y = 20*log10(sqrt())
'''      
A = np.array([0.920715-0.330749j, 0.918182-0.338073j, 0.914337-0.350555j,
       0.911895-0.359436j, 0.912323-0.359893j, 0.91632 -0.350891j,
       0.918457-0.346801j, 0.916473-0.350524j, 0.91156 -0.361785j,
       0.906311-0.372802j, 0.906677-0.374511j, 0.91278 -0.366455j,
       0.91632 -0.35736j , 0.916076-0.359741j, 0.908966-0.36914j ,
       0.903167-0.381958j, 0.902557-0.386535j, 0.907165-0.380737j,
       0.913452-0.373321j, 0.912567-0.370758j, 0.905426-0.378112j,
       0.898803-0.393981j, 0.892242-0.404937j, 0.882019-0.409423j,
       0.791656-0.391357j, 0.920898-0.303375j, 0.921508-0.344024j,
       0.913787-0.369903j, 0.90921 -0.383575j, 0.913482-0.381286j,
       0.918823-0.374237j, 0.919097-0.367126j, 0.916259-0.374084j,
       0.908081-0.388702j, 0.90451 -0.399475j, 0.908111-0.398162j,
       0.915435-0.392089j, 0.915008-0.378967j, 0.916168-0.383361j,
       0.905242-0.399902j, 0.901214-0.409606j, 0.905487-0.413452j,
       0.910064-0.403198j, 0.915313-0.390625j, 0.91336 -0.393341j,
       0.903747-0.405548j, 0.899322-0.420043j, 0.90213 -0.426147j,
       0.907043-0.413909j, 0.914062-0.403228j, 0.909851-0.403564j,
       0.899566-0.416168j, 0.8945  -0.432647j, 0.891174-0.444305j,
       0.890686-0.436767j, 0.887542-0.436584j, 0.84317 -0.45111j ,
       0.793029-0.267364j, 0.91333 -0.365905j, 0.907348-0.400329j,
       0.917236-0.401397j, 0.924255-0.397125j, 0.918396-0.393981j,
       0.913482-0.403686j, 0.903564-0.426818j, 0.900817-0.436157j,
       0.909118-0.432128j, 0.912933-0.420532j, 0.913574-0.409637j,
       0.907928-0.419128j, 0.896026-0.441253j, 0.893524-0.452636j,
       0.90213 -0.45343j , 0.90625 -0.439514j, 0.909668-0.422241j,
       0.904754-0.427703j, 0.890625-0.447723j, 0.89096 -0.463836j,
       0.896423-0.470062j, 0.898498-0.454467j, 0.904876-0.435821j,
       0.896209-0.444091j, 0.880218-0.46228j , 0.874145-0.487304j,
       0.864776-0.500457j, 0.846618-0.494842j, 0.718597-0.443695j,
       0.914764-0.302002j, 0.920105-0.388732j, 0.913543-0.434417j,
       0.906616-0.452026j, 0.916015-0.437408j, 0.92221 -0.425445j,
       0.910766-0.422912j, 0.902771-0.435974j, 0.89566 -0.465789j,
       0.891723-0.473846j, 0.908142-0.460113j, 0.911529-0.446685j,
       0.904418-0.433258j, 0.896179-0.446411j, 0.884277-0.474914j,
       0.88562 -0.481842j, 0.900054-0.476837j, 0.905273-0.45819j ,
       0.901184-0.438018j, 0.89154 -0.453277j, 0.876647-0.481231j,
       0.883117-0.49414j , 0.893066-0.496429j, 0.896637-0.46817j ,
       0.898437-0.443695j, 0.88565 -0.459075j, 0.868499-0.483764j,
       0.871856-0.507843j, 0.876129-0.511871j, 0.888519-0.478607j,
       0.895385-0.455322j, 0.877777-0.465087j, 0.859436-0.489135j,
       0.855743-0.522827j, 0.851409-0.530487j, 0.871704-0.494659j,
       0.878204-0.475524j, 0.847869-0.481506j, 0.805664-0.511749j,
       0.71466 -0.523101j, 0.855133-0.356048j, 0.926788-0.424194j,
       0.92633 -0.422485j, 0.899505-0.421875j, 0.876281-0.455474j,
       0.858459-0.505523j, 0.861938-0.515625j, 0.895721-0.498779j,
       0.901947-0.469299j, 0.882568-0.442657j, 0.861633-0.469848j,
       0.838958-0.515533j, 0.852294-0.531005j, 0.882751-0.523925j,
       0.891693-0.483276j, 0.881042-0.444885j, 0.855743-0.468322j,
       0.831237-0.512603j, 0.846862-0.53952j , 0.8768  -0.535186j,
       0.887237-0.480682j, 0.878753-0.43927j , 0.840942-0.46228j ,
       0.810211-0.511627j, 0.816711-0.557983j, 0.837371-0.559021j,
       0.867492-0.499939j, 0.861358-0.456543j, 0.808044-0.46878j ,
       0.757171-0.51477j , 0.70697 -0.550354j, 0.688812-0.379394j,
       0.94046 -0.340057j, 0.941406-0.368408j, 0.882232-0.398162j,
       0.841095-0.464935j, 0.829193-0.535339j, 0.85556 -0.541381j,
       0.9104  -0.491119j, 0.91101 -0.438598j, 0.863311-0.422943j,
       0.820312-0.476867j, 0.799652-0.543487j, 0.835693-0.555114j,
       0.895935-0.519683j, 0.901123-0.451812j, 0.859375-0.420257j,
       0.805664-0.473968j, 0.774627-0.543518j, 0.812469-0.567932j,
       0.872924-0.549072j, 0.893005-0.464111j, 0.860137-0.420715j,
       0.797393-0.467468j, 0.7565  -0.53366j , 0.7872  -0.580474j,
       0.846466-0.568908j, 0.888214-0.480102j, 0.863983-0.42279j ,
       0.788513-0.453949j, 0.736694-0.519866j, 0.748413-0.583221j,
       0.798553-0.582763j, 0.850891-0.498474j, 0.816589-0.435516j,
       0.682861-0.419342j, 0.625396-0.287628j, 0.839874-0.453369j,
       0.87854 -0.528991j, 0.950439-0.468566j, 0.944   -0.396301j,
       0.856628-0.383789j, 0.783233-0.449829j, 0.758911-0.53778j ])

'''
x = linspace(8, 12, 201)
plt.figure(0)
#y = []
w = []
for i in all_my_files:
    #print("ABdullah",i)
    test = i*conj(i)
    #print ('Abdullah',test) 
    f = sqrt(test)
#    print(test, 'test')
#    print(f, 'f')
#    for k in range(len(f)):
#        y =+ y.append(k)
#        print("AAA", y)
    y = 20*log10(f) #
    w.append(y)
#    print(y, 'dB')
#    print(y, 'y')
    #y.append[i]
print(w)
    

#print(y, 'w')
for i, j in zip(x, w):
    plt.title('S_11 Parameter w/ Tunnel')
    plt.xlabel('GHz')
    plt.ylabel('dB')
    plt.plot(i, j, 'bo')
    
coords = np.vstack([A.real, A.imag]).T

labels = ['r+ij', '-r+ij', '-r-ij', 'r-ij']
signs = np.array([[True,True], [False,True], [False,False], [True,False]]) #r+ij, -r+ij, -r-ij, r-ij

boolean = np.all(~(signs[:,None]^np.where(coords>0,True,False)[None,:]), axis=-1) #XNOR with broadcasting

#boolean - 
# [[ True False  True False False  True]  
#  [False  True False False False False] <- second number in '-r+ij'
#  [False False False  True  True False]
#  [False False False False False False]] <- no number in 'r-ij'

output = {labels[i]:A[j] for i,j in enumerate(boolean)}
output
